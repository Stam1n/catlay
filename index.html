<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CATLAY 2025</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        /* === CATLAY 2025 STYLE === */
        * { box-sizing: border-box; }
        :root { --red: #ff0033; --bg: #000000; --font-head: 'Orbitron', sans-serif; --font-body: 'Montserrat', sans-serif; }
        body { margin: 0; background: var(--bg); color: #fff; font-family: var(--font-body); overflow-x: hidden; min-height: 100vh; padding-bottom: 50px; }

        /* FON & PARTICLES */
        .ambient-bg { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -2; background: radial-gradient(circle at 50% 50%, #150005 0%, #000 90%); }
        .particles { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; pointer-events: none; }
        .particle { position: absolute; background: var(--red); border-radius: 50%; animation: rise 5s infinite; opacity: 0; }
        @keyframes rise { 0% {transform:translateY(100vh) scale(0); opacity:0;} 50% {opacity:1;} 100% {transform:translateY(-10vh) scale(1.5); opacity:0;} }

        /* HEADER */
        header { text-align: center; padding: 40px 20px 80px; position: relative; }
        h1 { font-family: var(--font-head); font-size: 4.5em; color: var(--red); margin: 0; text-transform: uppercase; letter-spacing: 10px; text-shadow: 0 0 30px var(--red); }
        .intro { max-width: 600px; margin: 0 auto; color: #888; margin-top: 10px; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; }

        .header-btn {
            position: absolute; top: 30px; background: #000; border: 2px solid var(--red);
            color: var(--red); padding: 10px 25px; border-radius: 30px; cursor: pointer;
            font-family: var(--font-body); font-weight: 900; transition: 0.3s; text-transform: uppercase; z-index: 10;
        }
        .header-btn:hover { background: var(--red); color: #000; box-shadow: 0 0 20px var(--red); }
        .btn-rules { left: 30px; } .btn-profile { right: 30px; }

        /* FAB */
        .fab {
            position: fixed; bottom: 30px; width: 60px; height: 60px;
            background: #000; border: 2px solid var(--red); color: var(--red);
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            font-size: 24px; cursor: pointer; z-index: 9999;
            opacity: 0; transform: translateY(50px); transition: 0.4s;
            box-shadow: 0 0 20px rgba(0,0,0,0.8);
        }
        .fab.visible { opacity: 1; transform: translateY(0); }
        .fab:hover { background: var(--red); color: #000; box-shadow: 0 0 30px var(--red); }
        .fab-rules { left: 30px; } .fab-profile { right: 30px; }

        /* --- 1. MAIN SLIDER --- */
        .main-section { position: relative; height: 550px; display: flex; align-items: center; justify-content: center; perspective: 1000px; margin-bottom: 50px; }
        .main-container { position: relative; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; }
        .main-slide {
            position: absolute; width: 320px; height: 450px; display: flex; flex-direction: column; align-items: center; justify-content: center;
            transition: all 0.6s cubic-bezier(0.25, 0.8, 0.25, 1); background: #000; border: 1px solid #333;
            cursor: pointer; overflow: hidden; border-radius: 5px;
        }
        .main-slide img { width: 100%; height: 100%; object-fit: cover; transition: 0.5s; position: absolute; top: 0; left: 0; z-index: 1; filter: brightness(0.6); }
        .person-placeholder { width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, #1a0000 0%, #000 100%); position: absolute; top:0; left:0; z-index: 1; }
        .person-icon { font-size: 10em; background: linear-gradient(to bottom, var(--red), #330000); -webkit-background-clip: text; -webkit-text-fill-color: transparent; filter: drop-shadow(0 0 10px var(--red)); }
        .text-placeholder { width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; background: #0a0a0a; position: absolute; top:0; left:0; z-index: 1; font-family: var(--font-head); font-size: 5em; color: #333; text-transform: uppercase; }
        .main-slide h3 { 
            font-family: var(--font-head); color: #fff; margin: 0; position: absolute; bottom: 0; width: 100%; padding: 20px;
            background: linear-gradient(to top, rgba(0,0,0,0.9), transparent); z-index: 2; 
            text-transform: uppercase; font-size: 1.4em; text-align: center; text-shadow: 0 0 10px #000;
        }
        .main-slide.active { transform: translateX(0) scale(1.1); z-index: 10; opacity: 1; border-color: #555; }
        .main-slide.prev { transform: translateX(-380px) scale(0.85) rotateY(15deg); z-index: 5; opacity: 0.4; filter: blur(2px); }
        .main-slide.next { transform: translateX(380px) scale(0.85) rotateY(-15deg); z-index: 5; opacity: 0.4; filter: blur(2px); }
        .main-slide.hidden { transform: scale(0.5); opacity: 0; pointer-events: none; z-index: 0; }
        .main-slide.active:hover { border-color: var(--red); box-shadow: 0 0 50px rgba(255, 0, 51, 0.5); }
        .main-slide.active:hover img { filter: brightness(1); transform: scale(1.05); }
        .main-slide.active:hover h3 { color: var(--red); text-shadow: 0 0 20px var(--red); }
        .arrow { position: absolute; top: 50%; transform: translateY(-50%); font-size: 3em; color: var(--red); cursor: pointer; z-index: 20; background: rgba(0,0,0,0.5); border-radius: 50%; width: 60px; height: 60px; display: flex; align-items: center; justify-content: center; transition: 0.3s; }
        .arrow:hover { background: var(--red); color: #fff; box-shadow: 0 0 20px var(--red); }
        .section-separator { width: 80%; height: 2px; background: var(--red); margin: 80px auto; box-shadow: 0 0 20px var(--red); border-radius: 50%; }

        /* --- 2. ADDITIONAL NOMINATIONS (–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –æ–±—Ä–µ–∑–∞–Ω–∏–µ) --- */
        .slay-section { margin-top: 50px; position: relative; padding-bottom: 50px; } 
        h2 { text-align: center; font-family: var(--font-head); color: var(--red); font-size: 2.5em; text-transform: uppercase; margin-bottom: 20px; text-shadow: 0 0 10px var(--red); }
        .locked-container { text-align: center; margin-bottom: 40px; }
        .locked-notice { color: #555; font-family: var(--font-head); text-transform: uppercase; border: 1px solid #333; display: inline-block; padding: 10px 30px; border-radius: 20px; font-weight: bold; }
        .slay-wrapper { position: relative; height: 500px; /* –£–≤–µ–ª–∏—á–∏–ª –≤—ã—Å–æ—Ç—É */ perspective: 1000px; overflow: visible; /* –ß—Ç–æ–±—ã –Ω–µ —Ä–µ–∑–∞–ª–æ */ display: flex; justify-content: center; }
        .slay-track { position: relative; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; transform-style: preserve-3d; }
        .slay-item { position: absolute; width: 240px; height: 350px; transition: transform 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94), opacity 0.6s; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .shield-card { width: 100%; height: 100%; background: #111; display: flex; align-items: center; justify-content: center; position: relative; mask: url("data:image/svg+xml,%3Csvg viewBox='0 0 100 120' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M50 0 L100 15 L100 85 L50 120 L0 85 L0 15 Z' fill='black'/%3E%3C/svg%3E"); -webkit-mask: url("data:image/svg+xml,%3Csvg viewBox='0 0 100 120' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M50 0 L100 15 L100 85 L50 120 L0 85 L0 15 Z' fill='black'/%3E%3C/svg%3E"); mask-size: 100% 100%; -webkit-mask-size: 100% 100%; background: linear-gradient(180deg, #1a0000, #000); }
        .shield-border { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: transparent; z-index: 2; pointer-events: none; box-shadow: inset 0 0 20px rgba(0,0,0,0.8); }
        .locked-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 5; display: flex; align-items: center; justify-content: center; }
        .locked-icon { font-size: 3em; color: #444; }
        .slay-title { 
            position: absolute; bottom: -60px; /* –û–ø—É—Å—Ç–∏–ª –Ω–∏–∂–µ */
            width: 150%; /* –®–∏—Ä–µ –±–ª–æ–∫ —Ç–µ–∫—Å—Ç–∞ */
            text-align: center; font-family: var(--font-head); font-size: 1.1em; color: #fff; text-transform: uppercase; 
            opacity: 0; transition: 0.3s; text-shadow: 0 0 10px #000; 
        }
        .slay-item.active { z-index: 100; pointer-events: auto; }
        .slay-item.active .shield-card { background: linear-gradient(180deg, #300000, #100000); }
        .slay-item.active .locked-icon { color: #666; text-shadow: 0 0 10px var(--red); }
        .slay-item.active .slay-title { opacity: 1; color: var(--red); bottom: -60px; }
        .slay-nav { position: absolute; bottom: 0px; left: 50%; transform: translateX(-50%); display: flex; gap: 30px; align-items: center; z-index: 50; }
        .slay-btn { background: none; border: none; color: var(--red); font-size: 2em; cursor: pointer; }
        .slay-cnt { font-family: var(--font-head); font-size: 1.5em; color: var(--red); }

        /* --- 3. SUGGESTIONS (–ö–†–ê–°–ò–í–û–ï –û–§–û–†–ú–õ–ï–ù–ò–ï) --- */
        .suggest-section { max-width: 600px; margin: 80px auto; padding: 30px; border: 1px solid #333; background: #080808; border-radius: 15px; box-shadow: 0 0 30px rgba(0,0,0,0.8); }
        .suggest-header { text-align: center; color: var(--red); font-family: var(--font-head); margin-bottom: 5px; font-size: 1.8em; }
        .suggest-desc { text-align: center; color: #888; font-size: 0.9em; margin-bottom: 20px; line-height: 1.5; }
        
        /* HEADER –°–ß–ï–¢–ß–ò–ö */
        .sug-counter-box {
            text-align: center; margin-bottom: 15px; font-family: var(--font-head); color: #fff;
        }
        .sug-counter-box span { color: var(--red); font-size: 1.2em; }

        .slots-container { display: flex; justify-content: center; gap: 10px; margin-bottom: 20px; }
        .slot { width: 15px; height: 15px; border: 2px solid #333; border-radius: 50%; transition: 0.3s; }
        .slot.filled { background: var(--red); border-color: var(--red); box-shadow: 0 0 10px var(--red); }

        /* –§–û–†–ú–ê */
        .suggest-form input, .suggest-form textarea { 
            width: 100%; background: #111; border: 1px solid #333; color: #fff; 
            padding: 15px; margin-bottom: 15px; font-family: var(--font-body); border-radius: 8px; font-weight: bold; transition: 0.3s;
        }
        .suggest-form input:focus, .suggest-form textarea:focus { border-color: var(--red); outline: none; box-shadow: 0 0 10px rgba(255,0,51,0.2); }
        .suggest-btn { width: 100%; padding: 15px; background: #222; color: #fff; border: none; font-weight: 900; cursor: pointer; text-transform: uppercase; transition: 0.3s; border-radius: 8px; border: 1px solid #333; }
        .suggest-btn:hover { background: var(--red); border-color: var(--red); box-shadow: 0 0 20px var(--red); }

        /* –ò–°–¢–û–†–ò–Ø –ü–†–ï–î–õ–û–ñ–ï–ù–ò–ô */
        .sug-history { margin-top: 20px; border-top: 1px solid #222; padding-top: 20px; }
        .sug-history h4 { margin: 0 0 10px 0; color: #555; text-transform: uppercase; font-size: 0.9em; text-align: center; }
        .sug-item { background: #111; padding: 10px 15px; margin-bottom: 8px; border-radius: 5px; border-left: 3px solid var(--red); font-size: 0.9em; color: #ccc; }

        /* --- MODALS --- */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 9999; align-items: center; justify-content: center; }
        .modal.active { display: flex; animation: openPulse 0.5s forwards; }
        @keyframes openPulse { 0% { opacity: 0; box-shadow: inset 0 0 0 var(--red); } 100% { opacity: 1; box-shadow: inset 0 0 100px rgba(255,0,51,0.2); } }
        .modal-content { width: 90%; max-width: 600px; padding: 40px; border: 2px solid #333; background: #0a0a0a; position: relative; max-height: 90vh; overflow-y: auto; border-radius: 10px; box-shadow: 0 0 30px #000; }
        .close { position: absolute; top: 15px; right: 20px; font-size: 40px; cursor: pointer; color: #555; transition: 0.3s; line-height: 1; }
        .close:hover { color: var(--red); transform: rotate(90deg); }

        /* GRID & AVATAR */
        .cand-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin-top: 20px; }
        .cand-card { background: #111; border: 1px solid #333; padding: 15px; text-align: center; cursor: pointer; transition: 0.3s; border-radius: 5px; font-size: 1em; font-weight: bold; display: flex; flex-direction: column; align-items: center; }
        .cand-avatar { width: 80px; height: 80px; border-radius: 50%; object-fit: cover; border: 2px solid #444; margin-bottom: 10px; background: #222; display: flex; align-items: center; justify-content: center; font-size: 2em; color: #555; }
        .cand-card:hover { border-color: var(--red); transform: translateY(-5px); }
        .cand-card.selected { border-color: var(--red); background: #1a0000; box-shadow: 0 0 15px rgba(255,0,51,0.2); }
        .vote-btn { width: 100%; padding: 15px; background: var(--red); color: #fff; border: none; font-weight: bold; font-size: 1.2em; text-transform: uppercase; margin-top: 20px; cursor: pointer; transition: 0.3s; }
        .vote-btn:hover { background: #fff; color: var(--red); box-shadow: 0 0 20px var(--red); }

        /* PROFILE */
        .token-box { border: 2px dashed #333; padding: 10px; margin: 20px 0; font-family: var(--font-head); font-size: 2.5em; letter-spacing: 5px; color: var(--red); user-select: all; }
        .refresh-btn { background: var(--red); color: #fff; border: none; padding: 12px 25px; font-weight: bold; cursor: pointer; text-transform: uppercase; margin-top: 15px; border-radius: 5px; box-shadow: 0 5px 15px rgba(0,0,0,0.5); }
        .refresh-btn:hover { background: #ff3355; transform: translateY(-2px); }
        .toast { position: fixed; top: 20px; right: 20px; background: #000; border: 1px solid var(--red); border-left: 5px solid var(--red); padding: 15px 30px; color: #fff; z-index: 10000; transform: translateX(200%); transition: 0.3s; font-weight: bold; }
        .toast.show { transform: translateX(0); }
        footer { margin-top: 80px; padding: 40px; border-top: 1px solid #222; text-align: center; color: #444; font-family: var(--font-head); letter-spacing: 2px; }
        @media (max-width: 768px) { h1 { font-size: 3em; } .main-slide { width: 220px; height: 350px; } .slay-item { width: 160px; height: 280px; } }
    </style>
</head>
<body>
    <div class="ambient-bg"></div>
    <div class="particles" id="particles"></div>
    <div id="toast" class="toast">Info</div>

    <div class="fab fab-rules" onclick="openModal('rulesModal')"><i class="fas fa-gavel"></i></div>
    <div class="fab fab-profile" onclick="openProfile()"><i class="fas fa-user"></i></div>

    <header id="mainHeader">
        <button class="header-btn btn-rules" onclick="openModal('rulesModal')"><i class="fas fa-gavel"></i> –ü–†–ê–í–ò–õ–ê</button>
        <button class="header-btn btn-profile" onclick="openProfile()"><i class="fas fa-user"></i> –ü–†–û–§–ò–õ–¨</button>
        <h1>CATLAY</h1>
        <div style="font-family: var(--font-head); color: #666; letter-spacing: 5px; margin-top: 10px;">2025 AWARDS</div>
        <p class="intro">–¢–≤–æ–π –≥–æ–ª–æ—Å —Ä–µ—à–∞–µ—Ç —Å—É–¥—å–±—É —Å–µ—Ä–≤–µ—Ä–∞</p>
    </header>

    <section class="main-section">
        <div class="arrow" style="left: 5%;" onclick="moveMain(-1)"><i class="fas fa-chevron-left"></i></div>
        <div class="arrow" style="right: 5%;" onclick="moveMain(1)"><i class="fas fa-chevron-right"></i></div>
        <div id="mainContainer" class="main-container"></div>
    </section>

    <div class="section-separator"></div>

    <section class="slay-section">
        <h2>–î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –ù–û–ú–ò–ù–ê–¶–ò–ò</h2>
        <div class="locked-container"><div class="locked-notice"><i class="fas fa-lock"></i> –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –ø–æ–∑–∂–µ</div></div>
        <div class="slay-wrapper"><div class="slay-track" id="slayTrack"></div></div>
        <div class="slay-nav">
            <button class="slay-btn" onclick="moveSlay(-1)"><i class="fas fa-caret-left"></i></button>
            <div class="slay-cnt" id="slayCount">1/9</div>
            <button class="slay-btn" onclick="moveSlay(1)"><i class="fas fa-caret-right"></i></button>
        </div>
    </section>

    <section class="suggest-section">
        <h3 class="suggest-header">–ü–†–ï–î–õ–û–ñ–ò–¢–¨ –ù–û–ú–ò–ù–ê–¶–ò–Æ</h3>
        <p class="suggest-desc">–£—á–∏—Ç—ã–≤–∞–π—Ç–µ: –º–æ–º–µ–Ω—Ç—ã —Å CatField –Ω–∞—á–∏–Ω–∞—è —Å 2025 –≥–æ–¥–∞.<br>–¢–æ–ø-3 –ø–æ–ø–∞–¥—É—Ç –≤ –ø—Ä–µ–º–∏—é.</p>
        
        <div class="sug-counter-box">–í–∞—à–∏ –∏–¥–µ–∏: <span id="sugCounterText">0/5</span></div>
        <div class="slots-container" id="slotsCont"></div>

        <div class="suggest-form" id="sugForm">
            <input type="text" id="sugName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –Ω–æ–º–∏–Ω–∞—Ü–∏–∏">
            <textarea id="sugDesc" placeholder="–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ (–∑–∞ —á—Ç–æ –¥–∞–µ—Ç—Å—è)" rows="3"></textarea>
            <button class="suggest-btn" onclick="sendSuggestion()">–û–¢–ü–†–ê–í–ò–¢–¨</button>
        </div>
        <div id="sugLimitMsg" style="display:none; text-align:center; color:var(--red); font-weight:bold; margin-bottom:20px;">–õ–∏–º–∏—Ç –∏—Å—á–µ—Ä–ø–∞–Ω! –°–ø–∞—Å–∏–±–æ –∑–∞ –∏–¥–µ–∏.</div>

        <div class="sug-history" id="sugHistory" style="display:none;">
            <h4>–í—ã –ø—Ä–µ–¥–ª–æ–∂–∏–ª–∏:</h4>
            <div id="sugList"></div>
        </div>
    </section>

    <div id="voteModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('voteModal')">&times;</span>
            <h2 id="voteTitle" style="font-family: var(--font-head); color: #fff; margin-top: 0; border-bottom: 1px solid #333; padding-bottom: 15px;"></h2>
            <div class="cand-grid" id="candGrid"></div>
            <button class="vote-btn" onclick="submitVote()">–ì–û–õ–û–°–û–í–ê–¢–¨</button>
        </div>
    </div>

    <div id="profileModal" class="modal">
        <div class="modal-content" style="text-align: center;">
            <span class="close" onclick="closeModal('profileModal')">&times;</span>
            <h2 style="font-family: var(--font-head); color: var(--red); margin-top: 0;">–ü–†–û–§–ò–õ–¨</h2>
            <div id="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            <div id="profileContent" style="display:none;">
                <div id="statusText" style="font-weight:900; color: #555; margin-bottom: 20px; font-size: 1.2em; font-family: var(--font-head);">–ù–ï –ó–ê–†–ï–ì–ò–°–¢–†–ò–†–û–í–ê–ù</div>
                <div id="authSection">
                    <p>–ö–æ–¥ –¥–ª—è <a href="https://t.me/CatLay_bot" target="_blank" style="color:var(--red);">@CatLay_bot</a></p>
                    <input type="text" value="---" readonly class="token-box" id="tokenDisplay" style="background:transparent; width:100%; text-align:center;">
                    <div id="timer" style="color:#666; font-family:monospace; font-size:1.2em;">--:--</div>
                    <button class="refresh-btn" onclick="refreshToken()">–û–ë–ù–û–í–ò–¢–¨ –ö–û–î</button>
                </div>
                <div style="display: flex; justify-content: space-around; margin-top: 30px; border-top: 1px solid #333; padding-top: 20px;">
                    <div><h3 id="statVoted" style="color: var(--red); margin:0; font-size:2em; font-family:var(--font-head);">0</h3><p style="margin:0; color:#888;">–ì–æ–ª–æ—Å–æ–≤</p></div>
                    <div><h3 id="statLeft" style="margin:0; font-size:2em; font-family:var(--font-head);">15</h3><p style="margin:0; color:#888;">–û—Å—Ç–∞–ª–æ—Å—å</p></div>
                </div>
            </div>
        </div>
    </div>

    <div id="rulesModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('rulesModal')">&times;</span>
            <h2 style="font-family: var(--font-head);">–ü–†–ê–í–ò–õ–ê</h2>
            <div style="color:#ccc; line-height:1.6; font-size:0.9em;">
                <p>1. –ì–æ–ª–æ—Å—É–π—Ç–µ –∑–∞ —Ç–µ—Ö –Ω–æ–º–∏–Ω–∞–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã—Ö —Å—á–∏—Ç–∞–µ—Ç–µ –Ω–∞–∏–±–æ–ª–µ–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–º–∏.</p>
                <p>2. –ó–∞–ø—Ä–µ—â–µ–Ω–æ –≥–æ–ª–æ—Å–æ–≤–∞—Ç—å —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤.</p>
                <p>3. –ó–∞–ø—Ä–µ—â–µ–Ω–æ –ø—Ä–µ–¥–ª–∞–≥–∞—Ç—å –Ω–æ–º–∏–Ω–∞–Ω—Ç–æ–≤ –∫–æ—Ç–æ—Ä—ã–µ –Ω–∏–∫–∞–∫ –Ω–µ –æ—Ç–Ω–æ—Å—è—Ç—Å—è –∫ —Ç–µ–º–µ.</p>
                <p>4. –ó–∞–ø—Ä–µ—â–µ–Ω–æ –ø—Ä–µ–¥–ª–∞–≥–∞—Ç—å –∞–±—Å–æ–ª—é—Ç–Ω–æ –±—Ä–µ–¥–æ–≤—ã–µ –Ω–æ–º–∏–Ω–∞—Ü–∏–∏.</p>
                <p>5. –ó–∞–ø—Ä–µ—â–µ–Ω–æ –∞–±—É–∑–∏—Ç—å –±–∞–≥–∏ —Å–∞–π—Ç–∞ (—Å–æ–æ–±—â–∞–π—Ç–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–∞–º CLAY).</p>
                <p>6. –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –¢–û–õ–¨–ö–û –æ –º–æ–º–µ–Ω—Ç–∞—Ö —Å –ö–µ—Ç—Ñ–∏–ª–¥–∞, –Ω–∞—á–∏–Ω–∞—è —Å 2025 –≥–æ–¥–∞.</p>
                <p>7. –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ–ø–∞–¥–∞—é—Ç –≤ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –ø—É–ª –Ω–æ–º–∏–Ω–∞–Ω—Ç–æ–≤.</p>
                <p>8. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –±—É–¥—É—Ç –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω—ã –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –ø—Ä–µ–º–∏–∏.</p>
            </div>
        </div>
    </div>

    <footer><hr style="border-color: #222; margin-bottom: 30px;">2025 CatField - CLAY</footer>

    <script>
        // üëá –ü–†–û–í–ï–†–¨ –°–°–´–õ–ö–£! üëá
        const API_URL = "https://sstamin.pythonanywhere.com"; 
        
        // –í–í–ï–î–ò –≠–¢–û–¢ –ö–û–î –í –ü–†–û–§–ò–õ–ï, –ß–¢–û–ë–´ –°–¢–ê–¢–¨ –ê–î–ú–ò–ù–û–ú –ë–ï–ó –ë–û–¢–ê:
        const ADMIN_SECRET = "ADMIN-666-KING";

        const mainNoms = [
            {title: "–ö–æ—Ä–æ–ª—å CLAY", isPerson: true, cands: ["Foltt1k", "Machinae", "fifa20120022", "SStamin", "Yanantess", "Homiki0"]},
            {title: "–ö–æ—Ä–æ–ª–µ–≤–∞ CLAY", isPerson: true, cands: ["BaBdjoN", "k4agune", "l0lpiks", "Marusan19", "Poroxhaha"]},
            {title: "–õ—É—á—à–∞—è –ø–æ—Å—Ç—Ä–æ–π–∫–∞", isPerson: false, cands: ["–ë–∞–∑–∞ —Ö—Ä–∞–Ω–∏—Ç–µ–ª–µ–π –∫—Ñ4", "–û—Å—Ç—Ä–æ–≤ —Å—Å –∫—Ñ4", "–û—Å—Ç—Ä–æ–≤ BaBdjoN –∫—Ñ5", "–°–ø–∞–≤–Ω –∫—Ñ4", "–°–ø–∞–≤–Ω –∫—Ñ5"]},
            {title: "–§–µ–π–ª –≥–æ–¥–∞", isPerson: false, cands: ["–ö—Ä–∞–∂–∞ —è–π—Ü–∞ —É —Å—Å –∫—Ñ4", "–ü—Ä–∏–≤–∞—Ç—ã 42—Ö42", "–ú–µ–∂—Å–µ–∑–æ–Ω—å–µ", "–£—Ö–æ–¥ —Å—Ç–∞–º–∏–Ω–∞", "–ö–ª–µ–π 2024", "Sdas_garula x-ray"]},
            {title: "–ß–µ–ª–æ–≤–µ–∫ –º–µ–º", isPerson: true, cands: ["Homiki0", "Timoxa118", "SStamin", "Chumachecha", "vital3000", "Foltt1k", "kkkkkeeeefff"]},
            {title: "–ó–∞–≤–æ–∑ –≥–æ–¥–∞", isPerson: false, cands: ["–í–æ–π–Ω–∞ –ø—Ä–∞–Ω–∫–æ–≤ –∫—Ñ5", "–ü—Ä–∞–≤–∏–ª–∞ —Å—Å –∫—Ñ4-–∫—Ñ5", "42—Ö42 –±–ª–æ–∫–∞", "–í–∑—Ä—ã–≤ –∑–∞–ø—Ä–µ—Ç–Ω–æ–π –∑–æ–Ω—ã"]},
            {title: "–ö–ª–∞–Ω/–ö–æ–º–∞–Ω–¥–∞", isPerson: false, cands: ["SSquadra", "–í–û–°–•–û–î", "–ö–üZZ", "–¢–¶–ö", "AUGUST"]}
        ];
        const subNoms = [
            {title: "–õ—É—á—à–∏–π —Å—Ç—Ä–æ–∏—Ç–µ–ª—å", icon: "tools"}, {title: "–õ—É—á—à–∏–π –ü–í–ü", icon: "skull"},
            {title: "–°–∫–∏–Ω –≥–æ–¥–∞", icon: "tshirt"}, {title: "–ü–∞—Ä–∞/–®–∏–ø –≥–æ–¥–∞", icon: "heart"},
            {title: "–ü–∏–∑–¥–∞–±–æ–ª –≥–æ–¥–∞", icon: "comment-slash"}
        ];
        const totalNoms = mainNoms.length;

        // --- INIT MAIN ---
        let mainIdx = 0;
        function initMain() {
            const cont = document.getElementById('mainContainer'); cont.innerHTML = '';
            mainNoms.forEach((n, i) => {
                let d = document.createElement('div'); d.className = 'main-slide hidden'; d.id = `ms-${i}`;
                let placeholder = n.isPerson ? `<div class="person-placeholder"><i class="fas fa-user person-icon"></i></div>` : `<div class="text-placeholder">${n.title.charAt(0)}</div>`;
                d.innerHTML = `<img src="${API_URL}/static/main_${i}.jpg" onerror="this.outerHTML='${placeholder.replace(/'/g, "\\'")}'"><h3>${n.title}</h3>`;
                d.onclick = () => { if(i===mainIdx) openVote(i); else { mainIdx=i; updateMain(); }};
                cont.appendChild(d);
            });
            updateMain();
        }
        function updateMain() {
            for(let i=0; i<mainNoms.length; i++) {
                let el = document.getElementById(`ms-${i}`);
                el.className = 'main-slide hidden';
                if(i===mainIdx) el.className='main-slide active';
                else if(i===(mainIdx-1+mainNoms.length)%mainNoms.length) el.className='main-slide prev';
                else if(i===(mainIdx+1)%mainNoms.length) el.className='main-slide next';
            }
        }
        function moveMain(d) { mainIdx=(mainIdx+d+mainNoms.length)%mainNoms.length; updateMain(); }

        // --- INIT SLAY ---
        let slayIdx = 0;
        function initSlay() {
            const tr = document.getElementById('slayTrack'); tr.innerHTML = '';
            subNoms.forEach((n, i) => {
                let d = document.createElement('div'); d.className = 'slay-item'; d.id = `sl-${i}`;
                d.innerHTML = `<div class="locked-overlay"><i class="fas fa-lock locked-icon"></i></div><div class="shield-card"><div class="shield-border"></div><i class="fas fa-${n.icon} fa-5x" style="color:#333;"></i></div><div class="slay-title">${n.title}</div>`;
                tr.appendChild(d);
            });
            updateSlay();
        }
        function updateSlay() {
            for(let i=0; i<subNoms.length; i++) {
                let el = document.getElementById(`sl-${i}`);
                let diff = i - slayIdx;
                let tf = '', z = 10, op = 1;
                if(diff===0) { tf='translateX(0) scale(1.1) translateZ(50px)'; z=100; el.classList.add('active'); }
                else { tf=`translateX(${diff*240}px) scale(${1-Math.abs(diff)*0.2}) rotateY(${-Math.sign(diff)*15}deg) translateZ(${-Math.abs(diff)*50}px)`; op=Math.abs(diff)>2?0:1-Math.abs(diff)*0.3; z=50-Math.abs(diff); el.classList.remove('active'); }
                el.style.transform=tf; el.style.zIndex=z; el.style.opacity=op;
            }
            document.getElementById('slayCount').innerText = `${slayIdx+1} / ${subNoms.length}`;
        }
        function moveSlay(d) { slayIdx+=d; if(slayIdx<0) slayIdx=0; if(slayIdx>=subNoms.length) slayIdx=subNoms.length-1; updateSlay(); }

        initMain(); initSlay();

        // --- UI & AUTH ---
        function openModal(id){ document.getElementById(id).classList.add('active'); }
        function closeModal(id){ document.getElementById(id).classList.remove('active'); }
        
        let currIdx;
        function openVote(idx) {
            currIdx = idx; document.getElementById('voteTitle').innerText = mainNoms[idx].title;
            const g = document.getElementById('candGrid'); g.innerHTML='';
            mainNoms[idx].cands.forEach(c => {
                let d = document.createElement('div'); d.className='cand-card';
                let icon = mainNoms[idx].isPerson ? '<i class="fas fa-user"></i>' : c.charAt(0);
                d.innerHTML = `<div class="cand-avatar">${icon}</div><div>${c}</div>`;
                d.onclick=()=>{ document.querySelectorAll('.cand-card').forEach(x=>x.classList.remove('selected')); d.classList.add('selected'); d.dataset.val=c; };
                g.appendChild(d);
            });
            openModal('voteModal');
        }

        let myToken = localStorage.getItem('tk');
        let tmr;

        async function openProfile() {
            openModal('profileModal');
            document.getElementById('loading').style.display='block';
            document.getElementById('profileContent').style.display='none';
            // –ï—Å–ª–∏ –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞ —á—Ç–æ-—Ç–æ –≤–≤–µ–ª–∏ (–∞–¥–º–∏–Ω –∫–æ–¥), –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ–≥–æ
            const inputVal = document.getElementById('tokenDisplay').value;
            if(inputVal === ADMIN_SECRET) { myToken = ADMIN_SECRET; localStorage.setItem('tk', myToken); }
            
            if(!myToken) await refreshToken();
            else check();
        }

        async function refreshToken() {
            try {
                let res = await fetch(API_URL + '/api/get_token');
                let d = await res.json();
                myToken = d.token; localStorage.setItem('tk', myToken);
                check();
            } catch(e) { toast("–û—à–∏–±–∫–∞ —Å–µ—Ç–∏"); document.getElementById('loading').innerText = "–ù–µ—Ç —Å–≤—è–∑–∏"; }
        }

        async function check() {
            try {
                let res = await fetch(API_URL + '/api/check_status', {method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({token:myToken})});
                let d = await res.json();
                
                if (d.expired && myToken !== ADMIN_SECRET) { await refreshToken(); return; }

                document.getElementById('loading').style.display='none';
                document.getElementById('profileContent').style.display='block';
                
                // –í–ê–ñ–ù–û: –†–∞–∑—Ä–µ—à–∞–µ–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–µ, —á—Ç–æ–±—ã –≤–≤–µ—Å—Ç–∏ –∞–¥–º–∏–Ω –∫–æ–¥
                const tokenInput = document.getElementById('tokenDisplay');
                tokenInput.value = myToken;
                tokenInput.removeAttribute('readonly'); 

                document.getElementById('statVoted').innerText = d.vote_count || 0;
                document.getElementById('statLeft').innerText = totalNoms - (d.vote_count || 0);
                
                const st = document.getElementById('statusText');
                const auth = document.getElementById('authSection');
                
                if(d.status==='approved') {
                    st.innerText = d.is_admin ? "ADMIN" : "–ó–ê–†–ï–ì–ò–°–¢–†–ò–†–û–í–ê–ù";
                    st.style.color = "#0f0";
                    auth.style.display = d.is_admin ? 'none' : 'none'; 
                    clearInterval(tmr);
                } else {
                    st.innerText = d.status==='review'?"–ù–ê –ü–†–û–í–ï–†–ö–ï":"–ù–ï –ó–ê–†–ï–ì–ò–°–¢–†–ò–†–û–í–ê–ù";
                    st.style.color = d.status==='review'?"#fa0":"#555";
                    auth.style.display = 'block'; startTimer(d.time_left);
                }
                updateSlots(d.sug_count || 0, d.suggestions || []);
            } catch(e) { toast("–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞"); }
        }

        function startTimer(s) {
            clearInterval(tmr); let l=Math.floor(s);
            const display = document.getElementById('timer');
            if(l <= 0) { display.innerText = "00:00"; return; }
            tmr = setInterval(() => {
                if(l<=0) { clearInterval(tmr); refreshToken(); return; }
                l--; display.innerText = `${Math.floor(l/60)}:${(l%60)<10?'0'+(l%60):l%60}`;
            }, 1000);
        }

        async function submitVote() {
            const sel = document.querySelector('.cand-card.selected');
            if(!sel) { toast("–í—ã–±–µ—Ä–∏ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞!"); return; }
            try {
                let res = await fetch(API_URL + '/api/vote', {method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({token:myToken, nomination:mainNoms[currIdx].title, candidate:sel.dataset.val})});
                let d = await res.json();
                if(d.success) { toast("–ü–†–ò–ù–Ø–¢–û!"); closeModal('voteModal'); check(); }
                else toast(d.message);
            } catch(e) { toast("–û—à–∏–±–∫–∞!"); }
        }

        async function sendSuggestion() {
            let nom = document.getElementById('sugName').value;
            let desc = document.getElementById('sugDesc').value;
            if(!nom || !desc) { toast("–ó–∞–ø–æ–ª–Ω–∏ –≤—Å–µ –ø–æ–ª—è!"); return; }
            try {
                let res = await fetch(API_URL + '/api/suggest', {method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({token:myToken, nomination:nom, description:desc})});
                let d = await res.json();
                toast(d.message);
                if(d.success) { 
                    document.getElementById('sugName').value=''; document.getElementById('sugDesc').value='';
                    updateSlots(5, d.suggestions); // Mock update, re-check triggers real
                    check();
                }
            } catch(e) { toast("–û—à–∏–±–∫–∞!"); }
        }

        function updateSlots(cnt, list) {
            const cont = document.getElementById('slotsCont'); cont.innerHTML='';
            const hist = document.getElementById('sugList'); hist.innerHTML='';
            const histBox = document.getElementById('sugHistory');
            
            document.getElementById('sugCounterText').innerText = `${cnt}/5`;

            if(cnt >= 5) {
                document.getElementById('sugForm').style.display = 'none';
                document.getElementById('sugLimitMsg').style.display = 'block';
            }
            for(let i=0; i<5; i++) {
                let div = document.createElement('div');
                div.className = i < cnt ? 'slot filled' : 'slot empty';
                cont.appendChild(div);
            }
            
            if(list && list.length > 0) {
                histBox.style.display = 'block';
                list.forEach(item => {
                    let div = document.createElement('div');
                    div.className = 'sug-item';
                    div.innerText = item;
                    hist.appendChild(div);
                });
            } else {
                histBox.style.display = 'none';
            }
        }

        function toast(msg) { let t = document.getElementById('toast'); t.innerText=msg; t.classList.add('show'); setTimeout(()=>t.classList.remove('show'),3000); }
        
        const pc = document.getElementById('particles');
        for(let i=0;i<40;i++) {
            let p=document.createElement('div'); p.className='particle';
            p.style.left=Math.random()*100+'%'; p.style.width=p.style.height=(Math.random()*5+2)+'px';
            p.style.animationDuration=(Math.random()*5+5)+'s'; p.style.animationDelay=Math.random()*5+'s';
            pc.appendChild(p);
        }
        window.addEventListener('scroll', ()=>{
            const show = document.getElementById('mainHeader').getBoundingClientRect().bottom < 0;
            document.querySelector('.fab-rules').classList.toggle('visible', show);
            document.querySelector('.fab-profile').classList.toggle('visible', show);
        });
    </script>
</body>
</html>
